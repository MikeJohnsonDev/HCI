<!DOCTYPE html>
<html>
	<head>
		<title>Settings</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="css/jquery.mobile-1.2.0.min.css" />
		<link rel="stylesheet" href="css/jqm-icon-pack-2.1.2-fa.css" />
		<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
		<script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>
		<script type="text/javascript" src="js/settings.js"></script>

		<script type="text/javascript">
			var settings = loadSettings();

			$(document).on("pageshow", function ()
			{
				$("#largeText").val(settings.largeText ? "on" : "off");
				$("#invertColours").val(settings.invertColours ? "on" : "off");
				$("#keepScreenOn").val(settings.keepScreenOn ? "on" : "off");
				$("#magnifier").val(settings.magnifier ? "on" : "off");
				$("#language").val(settings.language);

				$("#largeText").change(function ()
				{
					settings.largeText = $("#largeText").val() != "off";
					saveSettings(settings);
				});

				$("#invertColours").change(function ()
				{
					settings.invertColours = $("#invertColours").val() != "off";
					saveSettings(settings);
				});

				$("#keepScreenOn").change(function ()
				{
					settings.keepScreenOn = $("#keepScreenOn").val() != "off";
					saveSettings(settings);
				});

				$("#magnifer").change(function ()
				{
					settings.magnifer = $("#magnifer").val() != "off";
					saveSettings(settings);
				});

				$("#language").change(function ()
				{
					settings.language = $("#language").val();
					saveSettings(settings);
				});

				if (settings.largeText)
				{
					$("*").each(function ()
					{
						var size = $(this).css("font-size");

						if (size == "16px")
							$(this).css("font-size", "24px");

						if (size == "12.5px")
							$(this).css("font-size", "20.5px");
					});
				}
			});
		</script>
	</head>

	<body>
		<div data-role="page" id="settings">
			<div data-role="header" data-position="fixed">
				<a href="#" data-direction="reverse" data-rel="back" data-icon="arrow-l" class="ui-btn-left">Back</a>
				<h1>Settings</h1>
			</div>

			<div data-role="content">
				<fieldset data-role="fieldcontain">
					<label for="largeText"><b>Large text</b></label>
					<select name="largeText" id="largeText" data-role="slider">
						<option value="off">Off</option>
						<option value="on">On</option>
					</select>
				</fieldset>

				<fieldset data-role="fieldcontain">
					<label for="invertColours"><b>Invert colours</b></label>
					<select name="invertColours" id="invertColours" data-role="slider">
						<option value="off">Off</option>
						<option value="on">On</option>
					</select>
				</fieldset>

				<fieldset data-role="fieldcontain">
					<label for="keepScreenOn"><b>Keep screen on</b></label>
					<select name="keepScreenOn" id="keepScreenOn" data-role="slider">
						<option value="off">Off</option>
						<option value="on">On</option>
					</select>
				</fieldset>

				<fieldset data-role="fieldcontain">
					<label for="magnifier"><b>Magnifier</b></label>
					<select name="magnifier" id="magnifier" data-role="slider">
						<option value="off">Off</option>
						<option value="on">On</option>
					</select>
				</fieldset>

				<fieldset data-role="fieldcontain">
					<label for="language"><b>Language</b></label>
					<select name="language" id="language">
						<option value="en">English</option>
						<option value="fr">French</option>
						<option value="esp">Spanish</option>
						<option value="ch">Chinese</option>
						<option value="jp">Japanese</option>
					</select>
				</fieldset>
			</div>

			<div data-role="footer" data-position="fixed" data-id="footnav">
				<div data-role="navbar" data-iconpos="top">
					<ul>
						<li><a href="index.html" rel="external"><img src="images/home.png" height="35" width="35"/><br/>Home</a></li>
						<li><a href="map.html" rel="external"><img src="images/minimap.png" height="35" width="35"/><br/>Map</a></li>
						<li><a href="search.html" rel="external"><img src="images/search.png" height="35" width="35"/><br/>Search</a></li>
					</ul>
				</div>
			</div>
		</div>
	</body>
</html>